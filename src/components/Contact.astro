---
---

<section id="contact" class="relative py-24 z-10">
  <div class="max-w-5xl mx-auto px-6">
    <div data-reveal class="text-center max-w-lg mx-auto mb-12">
      <p class="text-sm font-semibold uppercase tracking-[3px] text-accent mb-6">
        <span data-lang="en">Contact</span>
        <span data-lang="bg">Контакт</span>
      </p>
      <p class="text-primary-secondary text-lg mb-6">
        <span data-lang="en">Let's build something together.</span>
        <span data-lang="bg">Нека изградим нещо заедно.</span>
      </p>
      <p class="mb-8">
        <a
          href="tel:+359879691194"
          class="text-2xl font-bold font-mono text-primary hover:text-accent transition-colors"
        >
          +359 879 691 194
        </a>
      </p>
      <div class="flex justify-center gap-4">
        <!-- GitHub -->
        <a href="https://github.com/SpitOnYourFace" target="_blank" rel="noopener noreferrer" class="social-icon group relative flex flex-col items-center gap-2" aria-label="GitHub">
          <span class="relative flex items-center justify-center w-12 h-12 rounded-full border border-accent/20 overflow-hidden transition-all duration-500 group-hover:border-accent/40 group-hover:shadow-[0_0_20px_rgba(200,151,62,0.15)]">
            <span class="absolute inset-0 bg-accent scale-y-0 origin-bottom transition-transform duration-500 group-hover:scale-y-100"></span>
            <svg class="relative z-10 w-5 h-5 text-primary-secondary group-hover:text-white transition-colors duration-500" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
            </svg>
          </span>
          <span class="text-[10px] font-medium text-primary-tertiary/0 group-hover:text-accent tracking-wider uppercase transition-all duration-500 translate-y-1 group-hover:translate-y-0 opacity-0 group-hover:opacity-100">GitHub</span>
        </a>
        <!-- Facebook -->
        <a href="https://www.facebook.com/share/1Cyiz9qXq4/" target="_blank" rel="noopener noreferrer" class="social-icon group relative flex flex-col items-center gap-2" aria-label="Facebook">
          <span class="relative flex items-center justify-center w-12 h-12 rounded-full border border-accent/20 overflow-hidden transition-all duration-500 group-hover:border-accent/40 group-hover:shadow-[0_0_20px_rgba(200,151,62,0.15)]">
            <span class="absolute inset-0 bg-accent scale-y-0 origin-bottom transition-transform duration-500 group-hover:scale-y-100"></span>
            <svg class="relative z-10 w-5 h-5 text-primary-secondary group-hover:text-white transition-colors duration-500" viewBox="0 0 24 24" fill="currentColor">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </span>
          <span class="text-[10px] font-medium text-primary-tertiary/0 group-hover:text-accent tracking-wider uppercase transition-all duration-500 translate-y-1 group-hover:translate-y-0 opacity-0 group-hover:opacity-100">Facebook</span>
        </a>
        <!-- YouTube -->
        <a href="https://www.youtube.com/channel/UCtA80N1APoWs2ELq8udQHpA" target="_blank" rel="noopener noreferrer" class="social-icon group relative flex flex-col items-center gap-2" aria-label="YouTube">
          <span class="relative flex items-center justify-center w-12 h-12 rounded-full border border-accent/20 overflow-hidden transition-all duration-500 group-hover:border-accent/40 group-hover:shadow-[0_0_20px_rgba(200,151,62,0.15)]">
            <span class="absolute inset-0 bg-accent scale-y-0 origin-bottom transition-transform duration-500 group-hover:scale-y-100"></span>
            <svg class="relative z-10 w-5 h-5 text-primary-secondary group-hover:text-white transition-colors duration-500" viewBox="0 0 24 24" fill="currentColor">
              <path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
          </span>
          <span class="text-[10px] font-medium text-primary-tertiary/0 group-hover:text-accent tracking-wider uppercase transition-all duration-500 translate-y-1 group-hover:translate-y-0 opacity-0 group-hover:opacity-100">YouTube</span>
        </a>
        <!-- Email -->
        <a href="mailto:InternetCodeSolutions@proton.me" class="social-icon group relative flex flex-col items-center gap-2" aria-label="Email">
          <span class="relative flex items-center justify-center w-12 h-12 rounded-full border border-accent/20 overflow-hidden transition-all duration-500 group-hover:border-accent/40 group-hover:shadow-[0_0_20px_rgba(200,151,62,0.15)]">
            <span class="absolute inset-0 bg-accent scale-y-0 origin-bottom transition-transform duration-500 group-hover:scale-y-100"></span>
            <svg class="relative z-10 w-5 h-5 text-primary-secondary group-hover:text-white transition-colors duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </span>
          <span class="text-[10px] font-medium text-primary-tertiary/0 group-hover:text-accent tracking-wider uppercase transition-all duration-500 translate-y-1 group-hover:translate-y-0 opacity-0 group-hover:opacity-100">Email</span>
        </a>
      </div>
    </div>

    <!-- Contact Form -->
    <div data-reveal class="max-w-lg mx-auto">
      <form id="contact-form" class="space-y-5" novalidate>
        <!-- Honeypot -->
        <div class="absolute opacity-0 h-0 overflow-hidden" aria-hidden="true">
          <input type="text" name="_honey" tabindex="-1" autocomplete="off" />
        </div>

        <div>
          <label for="contact-name" class="block text-xs font-semibold text-primary-secondary uppercase tracking-wider mb-2">
            <span data-lang="en">Name</span>
            <span data-lang="bg">Име</span>
          </label>
          <input
            type="text"
            id="contact-name"
            name="name"
            required
            minlength="2"
            class="w-full px-4 py-3 rounded-xl bg-surface-subtle border border-accent/20 text-primary text-sm placeholder:text-primary-tertiary focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all"
            placeholder="John Doe"
          />
          <p class="field-error text-xs text-red-500 mt-1 hidden" data-field="name"></p>
        </div>

        <div>
          <label for="contact-email" class="block text-xs font-semibold text-primary-secondary uppercase tracking-wider mb-2">
            <span data-lang="en">Email</span>
            <span data-lang="bg">Имейл</span>
          </label>
          <input
            type="email"
            id="contact-email"
            name="email"
            required
            class="w-full px-4 py-3 rounded-xl bg-surface-subtle border border-accent/20 text-primary text-sm placeholder:text-primary-tertiary focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all"
            placeholder="john@example.com"
          />
          <p class="field-error text-xs text-red-500 mt-1 hidden" data-field="email"></p>
        </div>

        <div>
          <label for="contact-message" class="block text-xs font-semibold text-primary-secondary uppercase tracking-wider mb-2">
            <span data-lang="en">Message</span>
            <span data-lang="bg">Съобщение</span>
            <span id="char-count" class="ml-2 text-[10px] text-primary-tertiary font-normal normal-case tracking-normal"></span>
          </label>
          <textarea
            id="contact-message"
            name="message"
            required
            minlength="10"
            rows="4"
            class="w-full px-4 py-3 rounded-xl bg-surface-subtle border border-accent/20 text-primary text-sm placeholder:text-primary-tertiary focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all resize-none"
            placeholder="Tell me about your project..."
          ></textarea>
          <p class="field-error text-xs text-red-500 mt-1 hidden" data-field="message"></p>
        </div>

        <div class="flex items-center gap-4">
          <button
            type="submit"
            id="contact-submit"
            class="inline-flex items-center gap-2 px-7 py-3 bg-accent hover:bg-accent/90 text-white text-sm font-semibold rounded-full transition-all duration-300 hover:shadow-[0_0_20px_rgba(200,151,62,0.3)]"
          >
            <span data-lang="en">Send message</span>
            <span data-lang="bg">Изпрати</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
            </svg>
          </button>
          <span id="contact-status" class="text-sm font-medium hidden"></span>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  (function () {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const status = document.getElementById('contact-status');
    const submitBtn = document.getElementById('contact-submit') as HTMLButtonElement;
    const nameInput = document.getElementById('contact-name') as HTMLInputElement;
    const emailInput = document.getElementById('contact-email') as HTMLInputElement;
    const messageInput = document.getElementById('contact-message') as HTMLTextAreaElement;
    const charCount = document.getElementById('char-count');
    if (!form) return;

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    function getLang(): string {
      return document.documentElement.dataset.lang || 'en';
    }

    function showFieldError(field: string, msg: string) {
      const el = form.querySelector(`.field-error[data-field="${field}"]`) as HTMLElement;
      if (el) { el.textContent = msg; el.classList.remove('hidden'); }
    }

    function clearFieldError(field: string) {
      const el = form.querySelector(`.field-error[data-field="${field}"]`) as HTMLElement;
      if (el) { el.textContent = ''; el.classList.add('hidden'); }
    }

    function setInputError(input: HTMLElement, hasError: boolean) {
      if (hasError) {
        input.classList.add('border-red-400');
        input.classList.remove('border-primary/10');
      } else {
        input.classList.remove('border-red-400');
        input.classList.add('border-primary/10');
      }
    }

    // Real-time validation
    nameInput?.addEventListener('blur', () => {
      const val = nameInput.value.trim();
      if (val.length > 0 && val.length < 2) {
        showFieldError('name', getLang() === 'bg' ? 'Минимум 2 символа' : 'Minimum 2 characters');
        setInputError(nameInput, true);
      } else {
        clearFieldError('name');
        setInputError(nameInput, false);
      }
    });

    emailInput?.addEventListener('blur', () => {
      const val = emailInput.value.trim();
      if (val.length > 0 && !emailRegex.test(val)) {
        showFieldError('email', getLang() === 'bg' ? 'Невалиден имейл' : 'Invalid email address');
        setInputError(emailInput, true);
      } else {
        clearFieldError('email');
        setInputError(emailInput, false);
      }
    });

    messageInput?.addEventListener('input', () => {
      const len = messageInput.value.length;
      if (charCount) charCount.textContent = `${len}/500`;
      if (len > 0 && len < 10) {
        showFieldError('message', getLang() === 'bg' ? 'Минимум 10 символа' : 'Minimum 10 characters');
        setInputError(messageInput, true);
      } else {
        clearFieldError('message');
        setInputError(messageInput, false);
      }
    });

    function validateAll(): boolean {
      let valid = true;
      const name = nameInput?.value.trim() || '';
      const email = emailInput?.value.trim() || '';
      const message = messageInput?.value.trim() || '';

      if (name.length < 2) {
        showFieldError('name', getLang() === 'bg' ? 'Името е задължително (мин. 2 символа)' : 'Name is required (min 2 characters)');
        setInputError(nameInput, true);
        valid = false;
      }
      if (!emailRegex.test(email)) {
        showFieldError('email', getLang() === 'bg' ? 'Валиден имейл е задължителен' : 'A valid email is required');
        setInputError(emailInput, true);
        valid = false;
      }
      if (message.length < 10) {
        showFieldError('message', getLang() === 'bg' ? 'Съобщението е задължително (мин. 10 символа)' : 'Message is required (min 10 characters)');
        setInputError(messageInput, true);
        valid = false;
      }
      return valid;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!status || !submitBtn) return;

      // Client-side validation first
      if (!validateAll()) return;

      submitBtn.disabled = true;
      status.className = 'text-sm font-medium text-primary-tertiary';
      status.classList.remove('hidden');
      status.textContent = getLang() === 'bg' ? 'Изпращане...' : 'Sending...';

      const formData = new FormData(form);
      const body = {
        name: formData.get('name'),
        email: formData.get('email'),
        message: formData.get('message'),
        _honey: formData.get('_honey'),
      };

      try {
        const res = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body),
        });

        const data = await res.json();

        if (res.ok) {
          status.className = 'text-sm font-medium text-green-600';
          status.classList.remove('hidden');
          status.textContent = getLang() === 'bg' ? 'Съобщението е изпратено!' : 'Message sent successfully!';
          form.reset();
          if (charCount) charCount.textContent = '';
          // Clear all field errors and styles on success
          ['name', 'email', 'message'].forEach(clearFieldError);
          [nameInput, emailInput, messageInput].forEach(el => el && setInputError(el, false));
        } else {
          status.className = 'text-sm font-medium text-red-600';
          status.classList.remove('hidden');
          status.textContent = data.error || 'Something went wrong.';
        }
      } catch {
        status.className = 'text-sm font-medium text-red-600';
        status.classList.remove('hidden');
        status.textContent = getLang() === 'bg' ? 'Неуспешна връзка със сървъра.' : 'Could not connect to server.';
      } finally {
        submitBtn.disabled = false;
        setTimeout(() => status?.classList.add('hidden'), 5000);
      }
    });
  })();
</script>
