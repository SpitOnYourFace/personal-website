---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import About from '../components/About.astro';
import Skills from '../components/Skills.astro';
import Projects from '../components/Projects.astro';
import CryptoTracker from '../components/CryptoTracker.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';
---

<BaseLayout title="Krasimir Kralev | Portfolio">
  <Navbar />

  <!-- ====== LAYER 1: SPACE ====== -->
  <Hero />

  <!-- Transition: Space → Sky -->
  <div class="layer-space-to-sky"></div>

  <!-- Sun & Moon: positioned between layers, arc-animated on theme toggle -->
  <div class="sky-sun" aria-hidden="true">
    <div class="sun-rays"></div>
    <div class="sun-halo"></div>
    <div class="sun-glow"></div>
    <div class="sun-core"></div>
  </div>
  <div class="sky-moon" aria-hidden="true">
    <div class="moon-rays"></div>
    <div class="moon-halo"></div>
    <div class="moon-glow"></div>
    <div class="moon-core"></div>
  </div>

  <!-- ====== LAYER 2: SKY ====== -->
  <div class="layer-sky">
    <!-- Upper clouds - drift behind About -->
    <div class="clouds-layer clouds-back" aria-hidden="true">
      <svg class="cloud-svg cloud-a1" viewBox="0 0 520 180" fill="none">
        <defs>
          <filter id="cloud-blur-a1" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.015" numOctaves="3" seed="1" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="18" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="1.5"/>
          </filter>
          <radialGradient id="cloud-grad-a1" cx="50%" cy="35%" r="60%">
            <stop offset="0%" stop-color="white" stop-opacity="0.6"/>
            <stop offset="60%" stop-color="white" stop-opacity="0.35"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.05"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-a1)">
          <path d="M80,130 Q60,110 90,90 Q75,60 120,55 Q140,30 190,40 Q220,20 270,35 Q310,15 350,40 Q400,30 420,55 Q460,50 455,80 Q475,100 440,120 Q450,140 400,145 Q350,155 280,148 Q200,155 140,145 Q100,148 80,130Z" fill="url(#cloud-grad-a1)"/>
          <path d="M130,125 Q120,100 155,85 Q150,55 200,50 Q230,32 275,45 Q315,28 345,50 Q380,42 395,70 Q415,80 400,105 Q410,125 370,130 Q310,140 240,132 Q170,138 130,125Z" fill="rgba(255,255,255,0.35)"/>
          <path d="M170,115 Q165,90 200,78 Q195,55 240,50 Q270,38 300,52 Q330,42 350,65 Q370,72 360,95 Q368,112 335,118 Q290,128 230,120 Q190,125 170,115Z" fill="rgba(255,255,255,0.25)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(260,85)">
          <!-- AWS logo -->
          <text x="0" y="-8" text-anchor="middle" font-family="'Inter', 'Segoe UI', sans-serif" font-size="30" font-weight="900" fill="#232F3E" letter-spacing="5">aws</text>
          <!-- Smile arrow -->
          <path d="M-30,8 Q0,22 30,8" stroke="#FF9900" stroke-width="3.5" fill="none" stroke-linecap="round"/>
          <path d="M26,4 L34,9 L26,14" stroke="#FF9900" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          <text x="0" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#FF9900" opacity="0.85" letter-spacing="1">amazon web services</text>
        </g>
      </svg>
      <svg class="cloud-svg cloud-a2" viewBox="0 0 440 160" fill="none">
        <defs>
          <filter id="cloud-blur-a2" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.018" numOctaves="3" seed="7" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="15" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="1.2"/>
          </filter>
          <radialGradient id="cloud-grad-a2" cx="45%" cy="38%" r="58%">
            <stop offset="0%" stop-color="white" stop-opacity="0.55"/>
            <stop offset="55%" stop-color="white" stop-opacity="0.3"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.04"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-a2)">
          <path d="M65,115 Q50,95 75,78 Q60,50 110,45 Q135,25 175,35 Q210,18 250,32 Q285,15 320,38 Q360,28 375,55 Q400,58 390,85 Q405,105 370,115 Q350,132 280,128 Q200,135 130,125 Q90,128 65,115Z" fill="url(#cloud-grad-a2)"/>
          <path d="M110,108 Q100,85 135,72 Q125,48 170,45 Q200,30 240,42 Q275,25 305,48 Q338,38 348,65 Q365,75 350,95 Q358,110 325,115 Q270,125 200,118 Q145,122 110,108Z" fill="rgba(255,255,255,0.3)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(220,72)">
          <!-- Azure swoosh logo -->
          <path d="M-22,-22 L-6,-22 L-18,0 L6,0 L-14,22 L-10,6 L-26,6Z" fill="url(#azure-grad)" />
          <defs>
            <linearGradient id="azure-grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#0078D4"/>
              <stop offset="100%" stop-color="#50E6FF"/>
            </linearGradient>
          </defs>
          <text x="18" y="-4" text-anchor="start" font-family="'Inter', sans-serif" font-size="22" font-weight="800" fill="#0078D4" letter-spacing="1">Azure</text>
          <text x="18" y="12" text-anchor="start" font-family="Inter, sans-serif" font-size="9" fill="#50E6FF" opacity="0.9" letter-spacing="0.5">Microsoft</text>
        </g>
      </svg>
      <svg class="cloud-svg cloud-a3" viewBox="0 0 380 140" fill="none">
        <defs>
          <filter id="cloud-blur-a3" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="2" seed="13" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="12" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="1.8"/>
          </filter>
          <radialGradient id="cloud-grad-a3" cx="50%" cy="40%" r="55%">
            <stop offset="0%" stop-color="white" stop-opacity="0.5"/>
            <stop offset="50%" stop-color="white" stop-opacity="0.28"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.03"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-a3)">
          <path d="M55,100 Q42,82 68,68 Q55,42 100,38 Q125,22 165,32 Q200,15 235,30 Q265,18 290,40 Q320,32 330,58 Q350,65 340,85 Q352,100 315,108 Q270,118 200,112 Q130,118 85,108 Q60,110 55,100Z" fill="url(#cloud-grad-a3)"/>
          <path d="M100,95 Q92,75 120,65 Q112,45 155,42 Q180,28 215,40 Q248,28 268,50 Q292,44 298,68 Q312,78 300,92 Q285,102 235,98 Q175,105 125,98 Q105,100 100,95Z" fill="rgba(255,255,255,0.25)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(190,62)">
          <!-- Google Cloud hexagon -->
          <polygon points="0,-20 17,-10 17,10 0,20 -17,10 -17,-10" fill="none" stroke="#4285F4" stroke-width="2.5"/>
          <polygon points="0,-14 12,-7 12,7 0,14 -12,7 -12,-7" fill="#4285F4" opacity="0.15"/>
          <line x1="0" y1="-14" x2="0" y2="-20" stroke="#EA4335" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="12" y1="7" x2="17" y2="10" stroke="#FBBC04" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="-12" y1="7" x2="-17" y2="10" stroke="#34A853" stroke-width="2.5" stroke-linecap="round"/>
          <circle cx="0" cy="-14" r="3" fill="#EA4335"/>
          <circle cx="12" cy="7" r="3" fill="#FBBC04"/>
          <circle cx="-12" cy="7" r="3" fill="#34A853"/>
          <text x="0" y="34" text-anchor="middle" font-family="'Inter', sans-serif" font-size="16" font-weight="700" letter-spacing="1">
            <tspan fill="#4285F4">G</tspan><tspan fill="#EA4335">o</tspan><tspan fill="#FBBC04">o</tspan><tspan fill="#4285F4">g</tspan><tspan fill="#34A853">l</tspan><tspan fill="#EA4335">e</tspan>
          </text>
          <text x="0" y="48" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#5F6368" letter-spacing="0.5">Cloud Platform</text>
        </g>
      </svg>
    </div>

    <About />

    <!-- Lower clouds - drift between About and Skills -->
    <div class="clouds-layer clouds-front" aria-hidden="true">
      <svg class="cloud-svg cloud-b1" viewBox="0 0 480 160" fill="none">
        <defs>
          <filter id="cloud-blur-b1" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.012" numOctaves="4" seed="3" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="20" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="1"/>
          </filter>
          <radialGradient id="cloud-grad-b1" cx="48%" cy="32%" r="62%">
            <stop offset="0%" stop-color="white" stop-opacity="0.75"/>
            <stop offset="50%" stop-color="white" stop-opacity="0.5"/>
            <stop offset="85%" stop-color="white" stop-opacity="0.2"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.02"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-b1)">
          <path d="M70,125 Q48,105 78,85 Q62,55 115,48 Q138,25 185,35 Q218,15 265,30 Q305,12 345,35 Q388,22 410,52 Q445,50 438,82 Q458,105 425,118 Q430,140 385,142 Q335,152 265,145 Q190,150 130,140 Q88,142 70,125Z" fill="url(#cloud-grad-b1)"/>
          <path d="M120,118 Q108,95 145,80 Q135,52 188,48 Q218,30 265,42 Q305,24 338,48 Q372,38 385,68 Q405,78 392,102 Q402,120 362,125 Q305,135 235,128 Q165,132 120,118Z" fill="rgba(255,255,255,0.4)"/>
          <path d="M165,110 Q158,88 195,75 Q188,52 235,48 Q262,35 295,50 Q325,40 342,62 Q358,70 348,92 Q356,108 328,112 Q285,122 225,115 Q180,118 165,110Z" fill="rgba(255,255,255,0.3)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(240,78)">
          <!-- Cloudflare cloud/shield -->
          <defs>
            <linearGradient id="cf-grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#F6821F"/>
              <stop offset="100%" stop-color="#FEAD10"/>
            </linearGradient>
          </defs>
          <path d="M-8,-28 Q-2,-38 8,-32 Q14,-40 24,-34 Q32,-38 36,-30 Q42,-30 40,-22 Q46,-18 40,-12 L-20,-12 Q-26,-16 -22,-22 Q-24,-28 -16,-28Z" fill="url(#cf-grad)"/>
          <path d="M-4,-28 Q0,-34 8,-30 Q12,-36 20,-32 Q26,-34 30,-28 Q34,-28 32,-22 Q36,-18 32,-14 L-12,-14 Q-16,-18 -14,-22 Q-16,-26 -10,-28Z" fill="#F38020" opacity="0.6"/>
          <text x="0" y="2" text-anchor="middle" font-family="'Inter', sans-serif" font-size="22" font-weight="800" fill="#F38020" letter-spacing="0.5">Cloudflare</text>
          <text x="0" y="18" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#FAAE2B" opacity="0.9">the orange cloud people</text>
        </g>
      </svg>
      <svg class="cloud-svg cloud-b2" viewBox="0 0 400 140" fill="none">
        <defs>
          <filter id="cloud-blur-b2" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.014" numOctaves="3" seed="9" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="16" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="0.8"/>
          </filter>
          <radialGradient id="cloud-grad-b2" cx="52%" cy="35%" r="58%">
            <stop offset="0%" stop-color="white" stop-opacity="0.7"/>
            <stop offset="55%" stop-color="white" stop-opacity="0.42"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.03"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-b2)">
          <path d="M55,105 Q38,85 65,70 Q50,42 100,38 Q128,20 168,30 Q205,12 245,28 Q278,10 315,32 Q352,22 365,52 Q388,55 378,80 Q395,100 360,108 Q340,125 275,120 Q200,128 125,118 Q80,122 55,105Z" fill="url(#cloud-grad-b2)"/>
          <path d="M102,98 Q92,78 125,65 Q115,42 160,38 Q188,25 225,36 Q258,20 285,42 Q315,32 328,58 Q345,68 335,88 Q342,102 310,108 Q260,118 195,110 Q135,115 102,98Z" fill="rgba(255,255,255,0.35)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(200,68)">
          <!-- Vercel triangle logo -->
          <polygon points="0,-30 22,-2 -22,-2" fill="#171717"/>
          <polygon points="0,-24 16,-6 -16,-6" fill="white" opacity="0.15"/>
          <text x="0" y="14" text-anchor="middle" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#171717" letter-spacing="2">Vercel</text>
          <text x="0" y="28" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" fill="#666" letter-spacing="0.5">develop. preview. ship.</text>
        </g>
      </svg>
      <svg class="cloud-svg cloud-b3" viewBox="0 0 360 130" fill="none">
        <defs>
          <filter id="cloud-blur-b3" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.016" numOctaves="3" seed="17" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="14" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="1"/>
          </filter>
          <radialGradient id="cloud-grad-b3" cx="50%" cy="38%" r="56%">
            <stop offset="0%" stop-color="white" stop-opacity="0.65"/>
            <stop offset="50%" stop-color="white" stop-opacity="0.38"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.03"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-b3)">
          <path d="M48,92 Q35,75 58,62 Q45,38 90,32 Q115,18 152,28 Q185,12 220,25 Q248,10 278,32 Q308,24 318,50 Q338,58 328,78 Q340,95 308,100 Q275,112 210,105 Q145,110 95,102 Q58,105 48,92Z" fill="url(#cloud-grad-b3)"/>
          <path d="M88,85 Q80,68 108,58 Q98,38 140,35 Q165,22 198,34 Q228,20 252,40 Q278,32 285,55 Q300,62 292,80 Q280,92 235,88 Q175,95 118,88 Q92,90 88,85Z" fill="rgba(255,255,255,0.3)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(180,60)">
          <!-- Netlify gem logo -->
          <defs>
            <linearGradient id="ntl-grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#05BDBA"/>
              <stop offset="50%" stop-color="#00C7B7"/>
              <stop offset="100%" stop-color="#3CEFCE"/>
            </linearGradient>
          </defs>
          <path d="M0,-22 L14,-11 L14,8 L0,20 L-14,8 L-14,-11Z" fill="url(#ntl-grad)"/>
          <path d="M0,-16 L10,-8 L10,5 L0,14 L-10,5 L-10,-8Z" fill="white" opacity="0.2"/>
          <line x1="-14" y1="-2" x2="14" y2="-2" stroke="white" stroke-width="1" opacity="0.3"/>
          <line x1="0" y1="-22" x2="0" y2="20" stroke="white" stroke-width="1" opacity="0.3"/>
          <text x="0" y="34" text-anchor="middle" font-family="'Inter', sans-serif" font-size="18" font-weight="800" fill="#00C7B7" letter-spacing="1">Netlify</text>
          <text x="0" y="48" text-anchor="middle" font-family="Inter, sans-serif" font-size="7" fill="#05BDBA" opacity="0.85">jamstack in the sky</text>
        </g>
      </svg>
      <svg class="cloud-svg cloud-b4" viewBox="0 0 300 120" fill="none">
        <defs>
          <filter id="cloud-blur-b4" x="-10%" y="-10%" width="120%" height="120%">
            <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="3" seed="23" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="12" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="0.8"/>
          </filter>
          <radialGradient id="cloud-grad-b4" cx="48%" cy="36%" r="55%">
            <stop offset="0%" stop-color="white" stop-opacity="0.6"/>
            <stop offset="50%" stop-color="white" stop-opacity="0.35"/>
            <stop offset="100%" stop-color="white" stop-opacity="0.02"/>
          </radialGradient>
        </defs>
        <g filter="url(#cloud-blur-b4)">
          <path d="M40,82 Q28,65 52,55 Q42,32 82,28 Q105,15 138,24 Q168,10 198,22 Q225,12 248,30 Q272,22 280,48 Q298,55 288,72 Q298,88 268,92 Q238,102 180,96 Q120,102 78,92 Q48,95 40,82Z" fill="url(#cloud-grad-b4)"/>
          <path d="M78,75 Q72,60 95,52 Q88,35 125,32 Q148,22 178,32 Q205,22 225,40 Q245,34 250,55 Q262,62 255,75 Q245,85 200,80 Q148,85 100,78 Q82,80 78,75Z" fill="rgba(255,255,255,0.28)"/>
        </g>
        <g class="cloud-provider-text" transform="translate(150,55)">
          <!-- DigitalOcean droplet -->
          <defs>
            <linearGradient id="do-grad" x1="50%" y1="0%" x2="50%" y2="100%">
              <stop offset="0%" stop-color="#0080FF"/>
              <stop offset="100%" stop-color="#0069D9"/>
            </linearGradient>
          </defs>
          <path d="M0,-30 C0,-30 16,-10 16,2 C16,11 9,18 0,18 C-9,18 -16,11 -16,2 C-16,-10 0,-30 0,-30Z" fill="url(#do-grad)"/>
          <ellipse cx="0" cy="4" rx="6" ry="5" fill="white" opacity="0.25"/>
          <ellipse cx="-2" cy="0" rx="3" ry="2.5" fill="white" opacity="0.15"/>
          <text x="0" y="32" text-anchor="middle" font-family="'Inter', sans-serif" font-size="14" font-weight="800" fill="#0080FF" letter-spacing="0.5">DigitalOcean</text>
          <text x="0" y="44" text-anchor="middle" font-family="Inter, sans-serif" font-size="7" fill="#0069D9" opacity="0.8">swim in the cloud</text>
        </g>
      </svg>
    </div>

    <Skills />
  </div>

  <!-- Transition: Sky → Forest -->
  <div class="layer-sky-to-forest" aria-hidden="true">
    <!-- Distant mountains -->
    <svg class="mountains-svg" viewBox="0 0 1440 320" preserveAspectRatio="none">
      <path d="M0,280 Q180,160 360,220 T720,180 T1080,230 T1440,200 L1440,320 L0,320 Z" fill="rgba(60,90,70,0.25)" />
      <path d="M0,300 Q240,200 480,260 T960,220 T1440,270 L1440,320 L0,320 Z" fill="rgba(45,75,55,0.35)" />
      <path d="M0,310 Q300,250 600,290 T1200,265 T1440,300 L1440,320 L0,320 Z" fill="rgba(35,60,42,0.5)" />
    </svg>
    <!-- Tree silhouettes -->
    <svg class="trees-svg" viewBox="0 0 1440 200" preserveAspectRatio="none">
      <polygon points="80,200 110,80 140,200" fill="rgba(30,55,38,0.6)" />
      <polygon points="95,120 110,60 125,120" fill="rgba(30,55,38,0.6)" />
      <polygon points="200,200 240,60 280,200" fill="rgba(25,50,35,0.7)" />
      <polygon points="220,100 240,30 260,100" fill="rgba(25,50,35,0.7)" />
      <polygon points="380,200 410,90 440,200" fill="rgba(35,60,42,0.5)" />
      <polygon points="395,130 410,70 425,130" fill="rgba(35,60,42,0.5)" />
      <polygon points="550,200 585,70 620,200" fill="rgba(28,52,36,0.65)" />
      <polygon points="565,110 585,40 605,110" fill="rgba(28,52,36,0.65)" />
      <polygon points="720,200 755,85 790,200" fill="rgba(30,55,38,0.6)" />
      <polygon points="735,125 755,65 775,125" fill="rgba(30,55,38,0.6)" />
      <polygon points="880,200 915,60 950,200" fill="rgba(25,48,34,0.7)" />
      <polygon points="895,100 915,30 935,100" fill="rgba(25,48,34,0.7)" />
      <polygon points="1050,200 1080,80 1110,200" fill="rgba(32,58,40,0.55)" />
      <polygon points="1065,120 1080,55 1095,120" fill="rgba(32,58,40,0.55)" />
      <polygon points="1220,200 1255,70 1290,200" fill="rgba(28,52,36,0.65)" />
      <polygon points="1235,110 1255,40 1275,110" fill="rgba(28,52,36,0.65)" />
      <polygon points="1370,200 1400,90 1430,200" fill="rgba(30,55,38,0.6)" />
      <polygon points="1385,130 1400,70 1415,130" fill="rgba(30,55,38,0.6)" />
    </svg>
  </div>

  <!-- ====== LAYER 3: FOREST ====== -->
  <div class="layer-forest">
    <Projects />
    <CryptoTracker />
  </div>

  <!-- Transition: Forest → Underground -->
  <div class="layer-forest-to-underground" aria-hidden="true">
    <!-- Rock layer -->
    <svg class="rock-layer-svg" viewBox="0 0 1440 200" preserveAspectRatio="none">
      <!-- Back rock ridge -->
      <path d="M0,140 Q80,100 160,120 Q240,90 340,110 Q420,80 520,105 Q600,75 700,100 Q780,70 880,95 Q960,65 1060,90 Q1140,70 1240,100 Q1320,80 1440,110 L1440,200 L0,200 Z" fill="#5a4a38" />
      <!-- Mid rock ridge -->
      <path d="M0,160 Q100,125 200,145 Q300,110 420,135 Q520,105 640,130 Q740,100 860,125 Q960,95 1080,120 Q1180,100 1300,130 Q1380,115 1440,135 L1440,200 L0,200 Z" fill="#4a3c2c" />
      <!-- Front rock ridge -->
      <path d="M0,175 Q120,150 240,165 Q360,140 480,158 Q600,135 720,155 Q840,130 960,152 Q1080,138 1200,160 Q1320,145 1440,162 L1440,200 L0,200 Z" fill="#3c3022" />
    </svg>
  </div>

  <!-- ====== LAYER 4: UNDERGROUND ====== -->
  <div class="layer-underground">
    <Contact />
    <Footer />
  </div>

  <script>
    // ---- Scroll Reveal ----
    const revealEls = document.querySelectorAll('[data-reveal]');
    if (revealEls.length) {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.remove('opacity-0', 'translate-y-5');
              entry.target.classList.add('opacity-100', 'translate-y-0');
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.15 }
      );
      revealEls.forEach((el) => {
        el.classList.add('opacity-0', 'translate-y-5', 'transition-all', 'duration-700', 'ease-out');
        observer.observe(el);
      });
    }

    // ---- Scroll Progress Bar (GPU-accelerated with rAF) ----
    (function () {
      const bar = document.getElementById('scroll-progress');
      if (!bar) return;
      let ticking = false;
      function updateProgress() {
        const scrollTop = window.scrollY;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const progress = docHeight > 0 ? scrollTop / docHeight : 0;
        bar.style.transform = 'scaleX(' + progress + ')';
        ticking = false;
      }
      window.addEventListener('scroll', function () {
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(updateProgress);
        }
      }, { passive: true });
      updateProgress();
    })();

    // ---- Konami Code Easter Egg ----
    (function () {
      const sequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
      let idx = 0;

      function spawnConfetti() {
        const colors = ['#c8973e', '#d4a84e', '#f7931a', '#627eea', '#fff'];
        for (let i = 0; i < 80; i++) {
          const el = document.createElement('div');
          el.style.cssText = `
            position: fixed;
            top: -10px;
            left: ${Math.random() * 100}vw;
            width: ${4 + Math.random() * 6}px;
            height: ${4 + Math.random() * 6}px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
            z-index: 99999;
            pointer-events: none;
            animation: confetti-fall ${1.5 + Math.random() * 2}s ease-out forwards;
          `;
          document.body.appendChild(el);
          setTimeout(() => el.remove(), 4000);
        }
      }

      // Add confetti keyframes (only once)
      if (!document.getElementById('confetti-style')) {
        const style = document.createElement('style');
        style.id = 'confetti-style';
        style.textContent = `
          @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }

      document.addEventListener('keydown', (e) => {
        if (e.key === sequence[idx]) {
          idx++;
          if (idx === sequence.length) {
            idx = 0;
            spawnConfetti();
          }
        } else {
          idx = 0;
        }
      });
    })();
  </script>
</BaseLayout>

<style>
  /* ===== TRANSITION: SPACE → SKY ===== */
  .layer-space-to-sky {
    position: relative;
    height: 450px;
    margin-top: -180px;
    z-index: 1;
    transition: background 0.55s ease;
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(26, 37, 85, 0.3) 8%,
      rgba(26, 37, 85, 0.6) 16%,
      #1a2555 24%,
      #223080 32%,
      #2a3a78 40%,
      #3455a0 50%,
      #4570b2 60%,
      #5a85bf 68%,
      #6e9dd0 76%,
      #84b5de 84%,
      #96c8e5 92%,
      #a4cfe8 100%
    );
  }

  :global(.dark) .layer-space-to-sky {
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(17, 21, 53, 0.3) 8%,
      rgba(17, 21, 53, 0.6) 16%,
      #111535 24%,
      #172050 32%,
      #1c2758 40%,
      #223068 50%,
      #283a78 60%,
      #2d3f7a 68%,
      #324588 76%,
      #364a8c 84%,
      #384f8e 92%,
      #364d8c 100%
    );
  }

  /* ===== SKY LAYER ===== */
  .layer-sky {
    position: relative;
    overflow: hidden;
    contain: layout style;
    transition: background 0.55s ease;
    --color-primary: 30 30 50;
    --color-primary-secondary: 50 50 75;
    --color-primary-tertiary: 80 80 110;
    --color-surface: 255 255 255;
    --color-surface-subtle: 240 248 255;
    background: linear-gradient(
      to bottom,
      #a4cfe8 0%,
      #b4d8ee 50%,
      #c4e1f4 100%
    );
  }

  :global(.dark) .layer-sky {
    --color-primary: 230 230 240;
    --color-primary-secondary: 170 175 200;
    --color-primary-tertiary: 130 135 165;
    --color-surface: 40 50 100;
    --color-surface-subtle: 17 17 132;
    background: linear-gradient(to bottom, #364d8c 0%, #6688cc 50%, #7096D1 100%);
  }

  /* ===== SUN — positioned between transition & sky layers ===== */
  .sky-sun {
    position: relative;
    z-index: 2;
    height: 0;
    overflow: visible;
    pointer-events: none;
  }

  .sun-core {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 160px;
    height: 160px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(255, 248, 220, 1) 0%,
      rgba(255, 235, 160, 0.9) 20%,
      rgba(255, 215, 100, 0.65) 40%,
      rgba(255, 195, 70, 0.3) 65%,
      transparent 100%
    );
    filter: blur(3px);
    animation: sun-pulse 6s ease-in-out infinite;
    z-index: 4;
  }

  .sun-glow {
    position: absolute;
    top: -200px;
    left: 50%;
    transform: translateX(-50%);
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(255, 235, 140, 0.75) 0%,
      rgba(255, 215, 90, 0.5) 12%,
      rgba(255, 200, 65, 0.3) 25%,
      rgba(255, 180, 50, 0.15) 42%,
      rgba(255, 160, 40, 0.06) 60%,
      transparent 80%
    );
    filter: blur(12px);
    animation: sun-pulse 6s ease-in-out infinite;
    z-index: 3;
  }

  .sun-halo {
    position: absolute;
    top: -450px;
    left: 50%;
    transform: translateX(-50%);
    width: 1100px;
    height: 1100px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(255, 230, 120, 0.3) 0%,
      rgba(255, 210, 90, 0.18) 15%,
      rgba(255, 195, 70, 0.08) 30%,
      rgba(255, 180, 60, 0.03) 45%,
      transparent 60%
    );
    filter: blur(25px);
    animation: sun-halo-pulse 8s ease-in-out infinite;
    z-index: 2;
  }

  .sun-rays {
    position: absolute;
    top: -300px;
    left: 50%;
    transform: translateX(-50%);
    width: 800px;
    height: 800px;
    border-radius: 50%;
    background:
      conic-gradient(
        from 0deg,
        transparent 0deg, rgba(255, 230, 140, 0.08) 8deg, transparent 16deg,
        transparent 30deg, rgba(255, 220, 120, 0.06) 38deg, transparent 46deg,
        transparent 60deg, rgba(255, 230, 140, 0.08) 68deg, transparent 76deg,
        transparent 90deg, rgba(255, 220, 120, 0.06) 98deg, transparent 106deg,
        transparent 120deg, rgba(255, 230, 140, 0.08) 128deg, transparent 136deg,
        transparent 150deg, rgba(255, 220, 120, 0.06) 158deg, transparent 166deg,
        transparent 180deg, rgba(255, 230, 140, 0.08) 188deg, transparent 196deg,
        transparent 210deg, rgba(255, 220, 120, 0.06) 218deg, transparent 226deg,
        transparent 240deg, rgba(255, 230, 140, 0.08) 248deg, transparent 256deg,
        transparent 270deg, rgba(255, 220, 120, 0.06) 278deg, transparent 286deg,
        transparent 300deg, rgba(255, 230, 140, 0.08) 308deg, transparent 316deg,
        transparent 330deg, rgba(255, 220, 120, 0.06) 338deg, transparent 346deg,
        transparent 360deg
      );
    filter: blur(18px);
    animation: sun-rays-spin 120s linear infinite;
    z-index: 1;
  }

  /* ===== DARK MODE: STATIC POSITIONS ===== */
  :global(.dark) .sky-sun { transform: translateX(110vw); }
  :global(.dark) .sky-moon { transform: translateX(0); }

  /* ===== MOON ELEMENT ===== */
  .sky-moon {
    position: relative;
    z-index: 2;
    height: 0;
    overflow: visible;
    pointer-events: none;
    transform: translateX(-110vw);
  }

  /* Moon surface — silver-white with crater detail */
  .moon-core {
    position: absolute;
    top: 25px;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(232, 232, 242, 0.95) 0%,
      rgba(218, 220, 235, 0.92) 18%,
      rgba(200, 205, 222, 0.88) 36%,
      rgba(182, 188, 210, 0.72) 55%,
      rgba(160, 165, 192, 0.35) 75%,
      transparent 100%
    );
    filter: blur(0.5px);
    animation: moon-pulse 8s ease-in-out infinite;
    z-index: 4;
  }

  /* Moon craters & maria (dark lunar seas) */
  .moon-core::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 50%;
    z-index: 1;
    pointer-events: none;
    background:
      /* Mare Imbrium — large dark sea, upper-left */
      radial-gradient(ellipse at 30% 32%, rgba(130, 135, 168, 0.32) 0%, transparent 22px),
      /* Mare Serenitatis — upper-right */
      radial-gradient(ellipse at 62% 28%, rgba(125, 130, 160, 0.26) 0%, transparent 18px),
      /* Mare Tranquillitatis — center-right */
      radial-gradient(ellipse at 56% 52%, rgba(130, 133, 165, 0.22) 0%, transparent 16px),
      /* Mare Crisium — right edge */
      radial-gradient(ellipse at 78% 38%, rgba(128, 132, 162, 0.2) 0%, transparent 12px),

      /* Tycho — prominent crater, lower-center */
      radial-gradient(circle at 44% 76%, rgba(105, 110, 145, 0.52) 0%, rgba(165, 170, 195, 0.2) 4px, transparent 7px),
      /* Copernicus — upper-center-left */
      radial-gradient(circle at 38% 42%, rgba(110, 115, 148, 0.46) 0%, rgba(165, 170, 195, 0.16) 3.5px, transparent 6px),
      /* Kepler — left of center */
      radial-gradient(circle at 24% 48%, rgba(108, 113, 142, 0.42) 0%, transparent 4.5px),
      /* Aristarchus — bright spot, upper-left */
      radial-gradient(circle at 18% 36%, rgba(112, 116, 148, 0.38) 0%, transparent 3.5px),

      /* Medium craters */
      radial-gradient(circle at 68% 65%, rgba(108, 112, 142, 0.36) 0%, transparent 3.5px),
      radial-gradient(circle at 50% 35%, rgba(112, 116, 148, 0.3) 0%, transparent 3px),
      radial-gradient(circle at 72% 48%, rgba(108, 112, 142, 0.28) 0%, transparent 3px),

      /* Small craters */
      radial-gradient(circle at 55% 20%, rgba(115, 118, 150, 0.3) 0%, transparent 2px),
      radial-gradient(circle at 32% 62%, rgba(112, 115, 145, 0.26) 0%, transparent 2px),
      radial-gradient(circle at 76% 72%, rgba(110, 114, 142, 0.22) 0%, transparent 1.5px),
      radial-gradient(circle at 42% 58%, rgba(115, 118, 150, 0.2) 0%, transparent 1.5px);
  }

  /* Terminator shadow — 3D depth on one edge */
  .moon-core::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    z-index: 2;
    pointer-events: none;
    background: linear-gradient(
      115deg,
      transparent 30%,
      rgba(50, 55, 88, 0.08) 45%,
      rgba(35, 40, 72, 0.15) 60%,
      rgba(20, 25, 58, 0.22) 80%,
      rgba(10, 12, 42, 0.28) 100%
    );
  }

  /* Moonlight inner glow */
  .moon-glow {
    position: absolute;
    top: -170px;
    left: 50%;
    transform: translateX(-50%);
    width: 500px;
    height: 500px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(180, 200, 255, 0.52) 0%,
      rgba(165, 190, 250, 0.32) 12%,
      rgba(148, 175, 240, 0.18) 25%,
      rgba(130, 160, 225, 0.08) 42%,
      rgba(115, 145, 210, 0.03) 60%,
      transparent 80%
    );
    filter: blur(15px);
    animation: moon-glow-pulse 10s ease-in-out infinite;
    z-index: 3;
  }

  /* Moonlight outer halo */
  .moon-halo {
    position: absolute;
    top: -395px;
    left: 50%;
    transform: translateX(-50%);
    width: 950px;
    height: 950px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(150, 180, 240, 0.22) 0%,
      rgba(140, 170, 230, 0.13) 15%,
      rgba(125, 155, 220, 0.06) 30%,
      rgba(110, 140, 205, 0.02) 45%,
      transparent 60%
    );
    filter: blur(30px);
    animation: moon-halo-pulse 12s ease-in-out infinite;
    z-index: 2;
  }

  /* Moonbeams — slow-spinning, subtle cool rays */
  .moon-rays {
    position: absolute;
    top: -270px;
    left: 50%;
    transform: translateX(-50%);
    width: 700px;
    height: 700px;
    border-radius: 50%;
    background:
      conic-gradient(
        from 0deg,
        transparent 0deg, rgba(170, 200, 250, 0.04) 6deg, transparent 12deg,
        transparent 30deg, rgba(160, 190, 240, 0.03) 36deg, transparent 42deg,
        transparent 60deg, rgba(170, 200, 250, 0.04) 66deg, transparent 72deg,
        transparent 90deg, rgba(160, 190, 240, 0.03) 96deg, transparent 102deg,
        transparent 120deg, rgba(170, 200, 250, 0.04) 126deg, transparent 132deg,
        transparent 150deg, rgba(160, 190, 240, 0.03) 156deg, transparent 162deg,
        transparent 180deg, rgba(170, 200, 250, 0.04) 186deg, transparent 192deg,
        transparent 210deg, rgba(160, 190, 240, 0.03) 216deg, transparent 222deg,
        transparent 240deg, rgba(170, 200, 250, 0.04) 246deg, transparent 252deg,
        transparent 270deg, rgba(160, 190, 240, 0.03) 276deg, transparent 282deg,
        transparent 300deg, rgba(170, 200, 250, 0.04) 306deg, transparent 312deg,
        transparent 330deg, rgba(160, 190, 240, 0.03) 336deg, transparent 342deg,
        transparent 360deg
      );
    filter: blur(20px);
    animation: sun-rays-spin 200s linear infinite;
    z-index: 1;
  }

  /* ===== SUN & MOON KEYFRAMES ===== */
  @keyframes sun-pulse {
    0%, 100% { opacity: 0.88; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.05); }
  }

  @keyframes sun-halo-pulse {
    0%, 100% { opacity: 0.7; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.03); }
  }

  @keyframes sun-rays-spin {
    from { transform: translateX(-50%) rotate(0deg); }
    to { transform: translateX(-50%) rotate(360deg); }
  }

  @keyframes moon-pulse {
    0%, 100% { opacity: 0.92; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.02); }
  }

  @keyframes moon-glow-pulse {
    0%, 100% { opacity: 0.85; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.04); }
  }

  @keyframes moon-halo-pulse {
    0%, 100% { opacity: 0.75; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.02); }
  }

  /* ===== ELLIPTICAL ARC ANIMATIONS ===== */
  /* ===== ELLIPTICAL ARC — bottom of the O ===== */
  .sky-sun.arc-exit-right,
  .sky-moon.arc-exit-right {
    animation: arc-exit-right 0.55s linear forwards;
  }

  .sky-sun.arc-enter-left,
  .sky-moon.arc-enter-left {
    animation: arc-enter-left 0.55s linear forwards;
  }

  /* Exit right: constant horizontal sweep, accelerating dip (Y = 60 * t²) */
  @keyframes arc-exit-right {
    0%    { transform: translateX(0)     translateY(0); }
    10%   { transform: translateX(11vw)  translateY(0.6px); }
    20%   { transform: translateX(22vw)  translateY(2.4px); }
    30%   { transform: translateX(33vw)  translateY(5.4px); }
    40%   { transform: translateX(44vw)  translateY(9.6px); }
    50%   { transform: translateX(55vw)  translateY(15px); }
    60%   { transform: translateX(66vw)  translateY(21.6px); }
    70%   { transform: translateX(77vw)  translateY(29.4px); }
    80%   { transform: translateX(88vw)  translateY(38.4px); }
    90%   { transform: translateX(99vw)  translateY(48.6px); }
    100%  { transform: translateX(110vw) translateY(60px); }
  }

  /* Enter left: constant sweep, decelerating rise (reciprocal) */
  @keyframes arc-enter-left {
    0%    { transform: translateX(-110vw) translateY(60px); }
    10%   { transform: translateX(-99vw)  translateY(48.6px); }
    20%   { transform: translateX(-88vw)  translateY(38.4px); }
    30%   { transform: translateX(-77vw)  translateY(29.4px); }
    40%   { transform: translateX(-66vw)  translateY(21.6px); }
    50%   { transform: translateX(-55vw)  translateY(15px); }
    60%   { transform: translateX(-44vw)  translateY(9.6px); }
    70%   { transform: translateX(-33vw)  translateY(5.4px); }
    80%   { transform: translateX(-22vw)  translateY(2.4px); }
    90%   { transform: translateX(-11vw)  translateY(0.6px); }
    100%  { transform: translateX(0)      translateY(0); }
  }

  @media (prefers-reduced-motion: reduce) {
    .sky-sun, .sky-moon {
      animation: none !important;
    }
  }

  /* ===== CLOUD LAYERS ===== */
  .clouds-layer {
    position: relative;
    overflow: visible;
  }

  .clouds-back {
    height: 160px;
    z-index: 1;
  }

  .clouds-front {
    height: 180px;
    z-index: 3;
  }

  .cloud-svg {
    position: absolute;
    pointer-events: auto;
    cursor: pointer;
    animation: drift-cloud linear infinite, cloud-bob ease-in-out infinite;
    will-change: transform;
    backface-visibility: hidden;
    transition: filter 0.5s ease, transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
  }

  .cloud-svg:hover {
    filter: brightness(1.2) drop-shadow(0 8px 30px rgba(255,255,255,0.35));
    animation-play-state: paused, paused;
    transform: translateX(var(--_dx, 0)) scale(1.08);
  }

  .cloud-svg .cloud-provider-text {
    opacity: 0;
    transition: opacity 0.5s ease 0.1s;
    pointer-events: none;
  }

  .cloud-svg:hover .cloud-provider-text {
    opacity: 1;
  }


  .cloud-svg {
    transition: opacity 0.55s ease;
  }

  :global(.dark) .cloud-svg {
    opacity: 0.15;
  }

  :global(.dark) .cloud-svg:hover {
    opacity: 0.45;
    filter: brightness(1.4) drop-shadow(0 8px 30px rgba(255,255,255,0.2));
  }

  /* Back clouds (behind About) — larger, slower, more translucent */
  .cloud-a1 { top: -10%; left: -35%; width: 400px; height: auto; animation-duration: 80s, 12s; opacity: 0.75; }
  .cloud-a2 { top: 25%; left: -30%; width: 340px; height: auto; animation-duration: 95s, 15s; animation-delay: -35s, -4s; opacity: 0.65; }
  .cloud-a3 { top: 55%; left: -25%; width: 290px; height: auto; animation-duration: 70s, 10s; animation-delay: -55s, -7s; opacity: 0.7; }

  /* Front clouds (between About & Skills) — sharper, closer, brighter */
  .cloud-b1 { top: -10%; left: -32%; width: 370px; height: auto; animation-duration: 65s, 14s; }
  .cloud-b2 { top: 20%; left: -28%; width: 320px; height: auto; animation-duration: 80s, 11s; animation-delay: -20s, -3s; }
  .cloud-b3 { top: 45%; left: -24%; width: 270px; height: auto; animation-duration: 72s, 16s; animation-delay: -45s, -8s; }
  .cloud-b4 { top: 70%; left: -20%; width: 230px; height: auto; animation-duration: 58s, 13s; animation-delay: -30s, -5s; }

  @keyframes drift-cloud {
    0% { transform: translateX(0); }
    100% { transform: translateX(calc(100vw + 450px)); }
  }

  @keyframes cloud-bob {
    0%, 100% { margin-top: 0; }
    50% { margin-top: -6px; }
  }

  /* ===== TRANSITION: SKY → FOREST ===== */
  .layer-sky-to-forest {
    position: relative;
    height: 350px;
    overflow: hidden;
    pointer-events: none;
    transition: background 0.55s ease;
    background: linear-gradient(
      to bottom,
      #c4e1f4 0%,
      #b0d4e0 8%,
      #90c0c8 18%,
      #70aab0 28%,
      #509a8a 40%,
      #3d8a6a 52%,
      #2e7a52 65%,
      #246a42 78%,
      #1e5530 100%
    );
  }

  .layer-sky-to-forest .mountains-svg {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 70%;
  }

  .layer-sky-to-forest .trees-svg {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 50%;
  }

  :global(.dark) .layer-sky-to-forest {
    background: linear-gradient(
      to bottom,
      #7096D1 0%,
      #6088c0 8%,
      #5078aa 18%,
      #406890 28%,
      #355a78 40%,
      #2a4e60 52%,
      #204548 65%,
      #183c38 78%,
      #0e3018 100%
    );
  }

  /* ===== FOREST LAYER ===== */
  .layer-forest {
    transition: background 0.55s ease;
    --color-primary: 230 240 230;
    --color-primary-secondary: 180 200 180;
    --color-primary-tertiary: 140 165 140;
    --color-surface: 25 60 35;
    --color-surface-subtle: 30 70 40;
    --color-accent: 200 180 80;
    background: linear-gradient(
      to bottom,
      #1e5530 0%,
      #2a6238 30%,
      #347040 60%,
      #3a7a45 100%
    );
  }

  :global(.dark) .layer-forest {
    --color-primary: 220 230 220;
    --color-primary-secondary: 160 180 160;
    --color-primary-tertiary: 120 145 120;
    --color-surface: 15 40 22;
    --color-surface-subtle: 20 48 28;
    background: linear-gradient(
      to bottom,
      #0e3018 0%,
      #12341c 30%,
      #163820 60%,
      #1a3c24 100%
    );
  }

  /* ===== TRANSITION: FOREST → UNDERGROUND ===== */
  .layer-forest-to-underground {
    position: relative;
    height: 300px;
    overflow: hidden;
    transition: background 0.55s ease;
    pointer-events: none;
    background: linear-gradient(
      to bottom,
      #3a7a45 0%,
      #4a7a3e 8%,
      #5a7035 18%,
      #5e6530 28%,
      #605828 38%,
      #5e4e24 48%,
      #5a4422 58%,
      #563c20 68%,
      #50361e 78%,
      #4a301c 88%,
      #3c3022 100%
    );
  }

  :global(.dark) .layer-forest-to-underground {
    background: linear-gradient(
      to bottom,
      #1a3c24 0%,
      #1c3420 8%,
      #1e2c1c 18%,
      #202618 28%,
      #222016 38%,
      #221c14 48%,
      #221a12 58%,
      #201810 68%,
      #1e160e 78%,
      #1c140c 88%,
      #1a120a 100%
    );
  }

  .rock-layer-svg {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 55%;
  }

  :global(.dark) .rock-layer-svg path:nth-child(1) { fill: #2a2218; }
  :global(.dark) .rock-layer-svg path:nth-child(2) { fill: #221a12; }
  :global(.dark) .rock-layer-svg path:nth-child(3) { fill: #1a120a; }

  /* ===== UNDERGROUND LAYER ===== */
  .layer-underground {
    position: relative;
    transition: background 0.55s ease;
    --color-primary: 255 248 235;
    --color-primary-secondary: 225 205 175;
    --color-primary-tertiary: 195 175 145;
    --color-surface: 60 48 34;
    --color-surface-subtle: 72 58 42;
    --color-accent: 200 151 62;
    background: linear-gradient(
      to bottom,
      #3c3022 0%,
      #3e3224 10%,
      #3c3022 30%,
      #3a2e20 50%,
      #382c1e 70%,
      #362a1c 90%,
      #34281a 100%
    );
  }

  :global(.dark) .layer-underground {
    --color-primary: 245 235 218;
    --color-primary-secondary: 205 185 155;
    --color-primary-tertiary: 170 150 125;
    --color-surface: 28 20 14;
    --color-surface-subtle: 38 28 20;
    background: linear-gradient(
      to bottom,
      #1a120a 0%,
      #1c140c 10%,
      #1a120a 30%,
      #181008 50%,
      #160e08 70%,
      #140c06 90%,
      #120a04 100%
    );
  }
</style>
